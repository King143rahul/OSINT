<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSINT Lookup Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <style>
        /* ... (Styles unchanged) ... */
         @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
        body { /* ... */ }
        .glass-card { /* ... */ }
        .tab-active { /* ... */ }
        .loader { /* ... */ }
        @keyframes spin { /* ... */ }
        .result-key { /* ... */ }
        .result-value { /* ... */ }
        .result-item { /* ... */ }
         .result-item:last-child { /* ... */ }
        .video-overlay { /* ... */ }
        .video-iframe { /* ... */ }
        .video-close-btn { /* ... */ }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl mx-auto">
       <header class="text-center mb-8"> /* ... */ </header>

        <main class="glass-card rounded-xl shadow-2xl p-6 md:p-8">
            <div class="flex border-b border-gray-700 mb-6"> /* ... */ </div>
             <div class="space-y-4"> /* ... */ </div>

            <div id="resultContainer" class="mt-8 min-h-[100px]"></div>
        </main>

        <footer class="text-center mt-8">
            <p class="text-gray-500 text-sm">Developer: RAHUL SHARMA</p>
        </footer>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        let lastResultData = null;

        // --- Ensure elements exist before adding listeners ---
        const searchBtn = document.getElementById('searchBtn');
        const numberInput = document.getElementById('numberInput');
        const pinInput = document.getElementById('pinInput');
        const resultContainer = document.getElementById('resultContainer');
        const savePinCheck = document.getElementById('savePinCheck');
        const tabs = document.querySelectorAll('.tab-btn');
        let activeTab = 'phone';

        const placeholders = { /* ... (unchanged) ... */ };

        if (tabs && tabs.length > 0) {
            tabs.forEach(tab => { /* ... (unchanged tab logic) ... */ });
        }

        // --- Attach search listeners only if elements exist ---
        if (searchBtn && numberInput && pinInput) {
            searchBtn.addEventListener('click', performSearch);
            numberInput.addEventListener('keyup', (e) => e.key === 'Enter' && performSearch());
            pinInput.addEventListener('keyup', (e) => e.key === 'Enter' && performSearch());
        } else {
            console.error("Could not find essential search elements (button, number input, pin input).");
        }

        function getDeviceId() { /* ... (unchanged) ... */ }
        function playFullscreenVideo(videoId) { /* ... (unchanged) ... */ }
        async function performSearch() { /* ... (unchanged) ... */ }
        function handleSearchAgain() { /* ... (unchanged) ... */ }
        function generatePdf() { /* ... (unchanged) ... */ }
        function displayResults(result) { /* ... (unchanged) ... */ }
        function displayError(msg) { /* ... (unchanged) ... */ }
        function setLoading(loading) { /* ... (unchanged) ... */ }

        function loadSavedPin() {
             // Make sure pinInput and savePinCheck exist before using them
             if(pinInput && savePinCheck) {
                 const savedPin = localStorage.getItem('osintApiKey');
                 if (savedPin) {
                     pinInput.value = savedPin;
                     savePinCheck.checked = true;
                 }
             } else {
                 console.error("Could not find PIN input or save checkbox for loading saved PIN.");
             }
        }

        // Run on page load
        loadSavedPin();
    </script>
</body>
</html>
